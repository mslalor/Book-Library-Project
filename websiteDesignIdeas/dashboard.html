<!DOCTYPE html>
<html>
<head>
<title>Personal Library</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src = "accounts.js"></script> 
<style>
body,h1,h2,h3,h4,h5,h6 {font-family: "Raleway", sans-serif}
</style>
</head>
<body class="w3-light-grey w3-content" style="max-width:1600px">

<!-- Sidebar/menu -->
<nav class="w3-sidebar w3-collapse w3-animate-left" style="z-index:3;width:300px; background-color: #271A42" id="mySidebar"><br>
  <div class="w3-container">
    <a href="#" onclick="w3_close()" class="w3-hide-large w3-right w3-jumbo w3-padding w3-white" title="close menu">
      <i class="fa fa-remove"></i>
    </a>
    <img id ="myPic" src="img/logo.png" style="width:100%;" class="w3-round"><br><br>
    <h4 id = "SideTitle" style = "color: white"><b> [InsertUsername]'s Library</b></h4>
  </div>
  <div class="w3-bar-block">
    <a href="#portfolio" onclick="w3_close()" class="w3-bar-item w3-button w3-padding " style = "color: white"><i class="fa fa-th-large fa-fw w3-margin-right"></i>LIBRARY</a> 
    
    <a href="#add" onclick="w3_close()" class="w3-bar-item w3-button w3-padding" style = "color: white">       ADD NEW BOOK</a>

    <a href = "login.html" class="w3-bar-item w3-button w3-padding" style = "color: white"> Sign out </a>
    <a href="#renter" onclick="w3_close()" class="w3-bar-item w3-button w3-padding" style = "color: white" hidden><p id = "sideRenter" hidden>ADD RENTER INFO</p></a>
  </div>
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:300px; background-color: #e5ddf4;">

  <!-- Header -->
  <header id="portfolio" style = "background-color: #e5ddf4; border-bottom-color: #271A42;">
   <!-- <a href="#"><img src="/w3images/avatar_g2.jpg" style="width:65px;" class="w3-circle w3-right w3-margin w3-hide-large w3-hover-opacity"></a>-->
    <span class="w3-button w3-hide-large w3-xxlarge w3-hover-text-grey" onclick="w3_open()"><i class="fa fa-bars"></i></span>
    <div class="w3-container">
    <h1 id = "Title" style= "color: #271A42"><b>[InsertUserName]'s Library</b></h1>
    <div class="w3-section w3-padding-16" style= "color: #271A42">
        <!--We will need to add functionality to this -->
      <span class="w3-margin-right" style= "color: #271A42">Filter:</span> 
      <button class="w3-button" style = "background-color: #66616fa3" onclick = "filterAll()">ALL</button>
      <button class="w3-button" style = "background-color: #66616fa3"  onclick = "filterLent()"></i>Lent out</button>
      <button class="w3-button" style = "background-color: #66616fa3"  onclick= "filterIn()"></i>In Library</button>
    </div>
    </div>
  </header>
  
  <!-- First Photo Grid-->
  <div class="w3-row-padding" style="border-top:#271A42; border-width: 10px;">
    <div class="w3-third w3-container w3-margin-bottom" id = "book1" hidden>
      <img src="img/potter1.jpg" id = "image1" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title1">Example Book</p>
        <p id = "summ1" >Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit1" class="w3-button w3-black w3-margin-bottom" onclick = "edit(1)" > Lend this book?</button>
        <button id = "remind1" class="w3-button w3-black w3-margin-bottom" onclick = "remind(1)" disabled> Remind</button>
        <button id = "remove1" class="w3-button w3-black w3-margin-bottom" onclick = "remove(1)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container w3-margin-bottom" id = "book2" hidden>
      <img src="img/potter7.jpeg" id = "image2" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title2"><b> Example Book</b></p>
        <p id = "summ2">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit2" class="w3-button w3-black w3-margin-bottom" onclick = "edit(2)"> Lend this book?</button>
        <button id = "remind2" class="w3-button w3-black w3-margin-bottom" onclick = "remind(2)" disabled> Remind</button>
        <button id = "remove2" class="w3-button w3-black w3-margin-bottom" onclick = "remove(2)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container" id="book3" hidden >
      <img src="img/games1.jpeg" id="image3" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title3"><b> Example Book</b></p>
        <p id = "summ3">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit3" class="w3-button w3-black w3-margin-bottom" onclick = "edit(3)"> Lend this book? </button>
        <button id = "remind3" class="w3-button w3-black w3-margin-bottom" onclick = "remind(3)" disabled> Remind</button>
        <button id = "remove3" class="w3-button w3-black w3-margin-bottom" onclick = "remove(3)"> Remove</button>
      </div>
    </div>
  </div>
  <!--Second row,, 4-6-->
  <div class="w3-row-padding" >
    <div class="w3-third w3-container w3-margin-bottom" id = "book4" hidden>
      <img src="img/potter1.jpg" id = "image4" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title4">Example Book</p>
        <p id = "summ4" >Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit4" class="w3-button w3-black w3-margin-bottom" onclick = "edit(4)"> Lend this book?</button>
        <button id = "remind4" class="w3-button w3-black w3-margin-bottom" onclick = "remind(4)" disabled> Remind</button>
        <button id = "remove4" class="w3-button w3-black w3-margin-bottom" onclick = "remove(4)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container w3-margin-bottom" id = "book5" hidden>
      <img src="img/potter7.jpeg" id = "image5" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title5"><b> Example Book</b></p>
        <p id = "summ5">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit5" class="w3-button w3-black w3-margin-bottom" onclick = "edit(5)"> Lend this book?</button>
        <button id = "remind5" class="w3-button w3-black w3-margin-bottom" onclick = "remind(5)" disabled> Remind</button>
        <button id = "remove5" class="w3-button w3-black w3-margin-bottom" onclick = "remove(5)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container" id="book6" hidden >
      <img src="img/games1.jpeg" id="image6" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title6"><b> Example Book</b></p>
        <p id = "summ6">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit6" class="w3-button w3-black w3-margin-bottom" onclick = "edit(6)"> Lend this book?</button>
        <button id = "remind6" class="w3-button w3-black w3-margin-bottom" onclick = "remind(6)" disabled> Remind</button>
        <button id = "remove6" class="w3-button w3-black w3-margin-bottom" onclick = "remove(6)"> Remove</button>
      </div>
    </div>
  </div>
   <!--Third row,, 7-9-->
  <div class="w3-row-padding" >
    <div class="w3-third w3-container w3-margin-bottom" id = "book7" hidden>
      <img src="img/potter1.jpg" id = "image7" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title7">Example Book</p>
        <p id = "summ7" >Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit7" class="w3-button w3-black w3-margin-bottom" onclick = "edit(7)"> Lend this book?</button>
        <button id = "remind7" class="w3-button w3-black w3-margin-bottom" onclick = "remind(7)" disabled> Remind</button>
        <button id = "remove7" class="w3-button w3-black w3-margin-bottom" onclick = "remove(7)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container w3-margin-bottom" id = "book8" hidden>
      <img src="img/potter7.jpeg" id = "image8" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title8"><b> Example Book</b></p>
        <p id = "summ8">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit8" class="w3-button w3-black w3-margin-bottom" onclick = "edit(8)"> Lend this book?</button>
        <button id = "remind8" class="w3-button w3-black w3-margin-bottom" onclick = "remind(8)" disabled> Remind</button>
        <button id = "remove8" class="w3-button w3-black w3-margin-bottom" onclick = "remove(8)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container" id="book9" hidden >
      <img src="img/games1.jpeg" id="image9" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title9"><b> Example Book</b></p>
        <p id = "summ9">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit9" class="w3-button w3-black w3-margin-bottom" onclick = "edit(9)"> Lend this book?</button>
        <button id = "remind9" class="w3-button w3-black w3-margin-bottom" onclick = "remind(9)" disabled> Remind</button>
        <button id = "remove9" class="w3-button w3-black w3-margin-bottom" onclick = "remove(9)"> Remove</button>
      </div>
    </div>
  </div>

   <!--Fourth row,, 10-12-->
  <div class="w3-row-padding" >
    <div class="w3-third w3-container w3-margin-bottom" id = "book10" hidden>
      <img src="img/potter1.jpg" id = "image10" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title10">Example Book</p>
        <p id = "summ10" >Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit10" class="w3-button w3-black w3-margin-bottom" onclick = "edit(10)"> Lend this book?</button>
        <button id = "remind10" class="w3-button w3-black w3-margin-bottom" onclick = "remind(10)" disabled> Remind</button>
        <button id = "remove10" class="w3-button w3-black w3-margin-bottom" onclick = "remove(10)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container w3-margin-bottom" id = "book11" hidden>
      <img src="img/potter7.jpeg" id = "image11" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title11"><b> Example Book</b></p>
        <p id = "summ11">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit11" class="w3-button w3-black w3-margin-bottom" onclick = "edit(11)"> Lend this book?</button>
        <button id = "remind11" class="w3-button w3-black w3-margin-bottom" onclick = "remind(11)" disabled> Remind</button>
        <button id = "remove11" class="w3-button w3-black w3-margin-bottom" onclick = "remove(11)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container" id="book12" hidden >
      <img src="img/games1.jpeg" id="image12" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title12"><b> Example Book</b></p>
        <p id = "summ12">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit12" class="w3-button w3-black w3-margin-bottom" onclick = "edit(12)"> Lend this book?</button>
        <button id = "remind12" class="w3-button w3-black w3-margin-bottom" onclick = "remind(12)" disabled> Remind</button>
        <button id = "remove12" class="w3-button w3-black w3-margin-bottom" onclick = "remove(12)"> Remove</button>
      </div>
    </div>
  </div>
  
   <!--Fifth row, 13-15-->
   <div class="w3-row-padding" >
    <div class="w3-third w3-container w3-margin-bottom" id = "book13" hidden>
      <img src="img/potter1.jpg" id = "image13" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title13">Example Book</p>
        <p id = "summ13" >Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit13" class="w3-button w3-black w3-margin-bottom" onclick = "edit(13)"> Lend this book?</button>
        <button id = "remind13" class="w3-button w3-black w3-margin-bottom" onclick = "remind(13)" disabled> Remind</button>
        <button id = "remove13" class="w3-button w3-black w3-margin-bottom" onclick = "remove(13)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container w3-margin-bottom" id = "book14" hidden>
      <img src="img/potter7.jpeg" id = "image14" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title14"><b> Example Book</b></p>
        <p id = "summ14">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit14" class="w3-button w3-black w3-margin-bottom" onclick = "edit(14)"> Lend this book?</button>
        <button id = "remind14" class="w3-button w3-black w3-margin-bottom" onclick = "remind(14)" disabled> Remind</button>
        <button id = "remove14" class="w3-button w3-black w3-margin-bottom" onclick = "remove(14)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container" id="book15" hidden >
      <img src="img/games1.jpeg" id="image15" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title15"><b> Example Book</b></p>
        <p id = "summ15">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit15" class="w3-button w3-black w3-margin-bottom" onclick = "edit(15)"> Lend this book?</button>
        <button id = "remind15" class="w3-button w3-black w3-margin-bottom" onclick = "remind(15)" disabled> Remind</button>
        <button id = "remove15" class="w3-button w3-black w3-margin-bottom" onclick = "remove(15)"> Remove</button>
      </div>
    </div>
  </div>

   <!--sixth row,, 16-18-->
   <div class="w3-row-padding" >
    <div class="w3-third w3-container w3-margin-bottom" id = "book16" hidden>
      <img src="img/potter1.jpg" id = "image16" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title16">Example Book</p>
        <p id = "summ16" >Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit16" class="w3-button w3-black w3-margin-bottom" onclick = "edit(16)"> Lend this book?</button>
        <button id = "remind16" class="w3-button w3-black w3-margin-bottom" onclick = "remind(16)" disabled> Remind</button>
        <button id = "remove16" class="w3-button w3-black w3-margin-bottom" onclick = "remove(16)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container w3-margin-bottom" id = "book17" hidden>
      <img src="img/potter7.jpeg" id = "image17" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title17"><b> Example Book</b></p>
        <p id = "summ17">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit17" class="w3-button w3-black w3-margin-bottom" onclick = "edit(17)"> Lend this book?</button>
        <button id = "remind17" class="w3-button w3-black w3-margin-bottom" onclick = "remind(17)" disabled> Remind</button>
        <button id = "remove17" class="w3-button w3-black w3-margin-bottom" onclick = "remove(17)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container" id="book18" hidden >
      <img src="img/games1.jpeg" id="image18" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title18"><b> Example Book</b></p>
        <p id = "summ18">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit18" class="w3-button w3-black w3-margin-bottom" onclick = "edit(18)"> Lend this book?</button>
        <button id = "remind18" class="w3-button w3-black w3-margin-bottom" onclick = "remind(18)" disabled> Remind</button>
        <button id = "remove18" class="w3-button w3-black w3-margin-bottom" onclick = "remove(18)"> Remove</button>
      </div>
    </div>
  </div>


  <!--Seventh row,, 19-21-->
  <div class="w3-row-padding" >
    <div class="w3-third w3-container w3-margin-bottom" id = "book19" hidden>
      <img src="img/potter1.jpg" id = "image19" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title19">Example Book</p>
        <p id = "summ19" >Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit19" class="w3-button w3-black w3-margin-bottom" onclick = "edit(19)"> Lend this book?</button>
        <button id = "remind19" class="w3-button w3-black w3-margin-bottom" onclick = "remind(19)" disabled> Remind</button>
        <button id = "remove19" class="w3-button w3-black w3-margin-bottom" onclick = "remove(19)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container w3-margin-bottom" id = "book20" hidden>
      <img src="img/potter7.jpeg" id = "image20" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title20"><b> Example Book</b></p>
        <p id = "summ20">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit20" class="w3-button w3-black w3-margin-bottom" onclick = "edit(20)"> Lend this book?</button>
        <button id = "remind20" class="w3-button w3-black w3-margin-bottom" onclick = "remind(20)" disabled> Remind</button>
        <button id = "remove20" class="w3-button w3-black w3-margin-bottom" onclick = "remove(20)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container" id="book21" hidden >
      <img src="img/games1.jpeg" id="image21" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title21"><b> Example Book</b></p>
        <p id = "summ21">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit21" class="w3-button w3-black w3-margin-bottom" onclick = "edit(21)"> Lend this book?</button>
        <button id = "remind21" class="w3-button w3-black w3-margin-bottom" onclick = "remind(21)" disabled> Remind</button>
        <button id = "remove21" class="w3-button w3-black w3-margin-bottom" onclick = "remove(21)"> Remove</button>
      </div>
    </div>
  </div>

  <!--eighth row,, 22-24-->
  <div class="w3-row-padding" >
    <div class="w3-third w3-container w3-margin-bottom" id = "book22" hidden>
      <img src="img/potter1.jpg" id = "image22" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title22">Example Book</p>
        <p id = "summ22" >Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit22" class="w3-button w3-black w3-margin-bottom" onclick = "edit(22)"> Lend this book?</button>
        <button id = "remind22" class="w3-button w3-black w3-margin-bottom" onclick = "remind(22)" disabled> Remind</button>
        <button id = "remove22" class="w3-button w3-black w3-margin-bottom" onclick = "remove(22)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container w3-margin-bottom" id = "book23" hidden>
      <img src="img/potter7.jpeg" id = "image23" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title23"><b> Example Book</b></p>
        <p id = "summ23">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit23" class="w3-button w3-black w3-margin-bottom" onclick = "edit(23)"> Lend this book?</button>
        <button id = "remind23" class="w3-button w3-black w3-margin-bottom" onclick = "remind(23)" disabled> Remind</button>
        <button id = "remove23" class="w3-button w3-black w3-margin-bottom" onclick = "remove(23)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container" id="book24" hidden >
      <img src="img/games1.jpeg" id="image24" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title24"><b> Example Book</b></p>
        <p id = "summ24">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit24" class="w3-button w3-black w3-margin-bottom" onclick = "edit(24)"> Lend this book?</button>
        <button id = "remind24" class="w3-button w3-black w3-margin-bottom" onclick = "remind(24)" disabled> Remind</button>
        <button id = "remove24" class="w3-button w3-black w3-margin-bottom" onclick = "remove(24)"> Remove</button>
      </div>
    </div>
  </div>
   <!--ninth row,, 25-27-->
   <div class="w3-row-padding" >
    <div class="w3-third w3-container w3-margin-bottom" id = "book25" hidden>
      <img src="img/potter1.jpg" id = "image25" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title25">Example Book</p>
        <p id = "summ25" >Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit25" class="w3-button w3-black w3-margin-bottom" onclick = "edit(25)"> Lend this book?</button>
        <button id = "remind25" class="w3-button w3-black w3-margin-bottom" onclick = "remind(25)" disabled> Remind</button>
        <button id = "remove25" class="w3-button w3-black w3-margin-bottom" onclick = "remove(25)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container w3-margin-bottom" id = "book26" hidden>
      <img src="img/potter7.jpeg" id = "image26" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title26"><b> Example Book</b></p>
        <p id = "summ26">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit26" class="w3-button w3-black w3-margin-bottom" onclick = "edit(26)"> Lend this book?</button>
        <button id = "remind26" class="w3-button w3-black w3-margin-bottom" onclick = "remind(26)" disabled> Remind</button>
        <button id = "remove26" class="w3-button w3-black w3-margin-bottom" onclick = "remove(26)"> Remove</button>
      </div>
    </div>
    <div class="w3-third w3-container" id="book27" hidden >
      <img src="img/games1.jpeg" id="image27" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "title27"><b> Example Book</b></p>
        <p id = "summ27">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <button id = "edit27" class="w3-button w3-black w3-margin-bottom" onclick = "edit(27)"> Lend this book?</button>
        <button id = "remind27" class="w3-button w3-black w3-margin-bottom" onclick = "remind(27)" disabled> Remind</button>
        <button id = "remove27" class="w3-button w3-black w3-margin-bottom" onclick = "remove(27)"> Remove</button>
      </div>
    </div>
  </div>











  <div class="w3-container w3-padding-large" id = "renter" style="margin-bottom: 10mm" hidden>

    <!-- Add book sectionn -->
    <div id = "renter" class="w3-container w3-padding-large w3-grey">
      <h4 id="contact"><b>Who did you rent this to? (Email) </b></h4>
      <input id="inputEmail">
      <h4 id="contact"><b>Renter's Name? </b></h4>
      <input id = "inputDate">
      <!--<h4 id="contact"><b>In how many weeks should we start sending reminder emails? </b></h4>
      <input id = "inputWeeks">-->
      <button onclick="checkOut()">Submit!</button><br>
      <div id="output"></div>
    </div>
  </div>

  <div class="w3-container w3-padding-large" style="margin-bottom: 10mm">

  <!-- Add book sectionn -->
  <div class="w3-container w3-padding-large w3-grey">
    <h4 id="add"><b>Add Book </b></h4>

    <input id="input">
    <button onclick="getbooks()">Get books</button><br>
    <div id="output"></div>

<div class="w3-row-padding"  id = "searchResults">
    <div class="w3-third w3-container" id="result1"  style = 'margin-bottom: 10px' hidden>
      <img src="img/games1.jpeg" id="cover1" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "search1"><b> Example Book</b></p>
        <p id = "info1">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <p id = "isbn1">0000</p>
        <button id = "add1" class="w3-button w3-black w3-margin-bottom" onclick = "addBook(1)"> Add to Library!</button>
      </div>
    </div>
    <div class="w3-third w3-container" id="result2" style = 'margin-bottom: 10px' hidden>
      <img src="img/games1.jpeg" id="cover2" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "search2"><b> Example Book</b></p>
        <p id = "info2">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <p id = "isbn2">0000</p>
        <button id = "add2" class="w3-button w3-black w3-margin-bottom" onclick = "addBook(2)"> Add to Library!</button>
    </div>
    </div>
    <div class="w3-third w3-container" id="result3" style = 'margin-bottom: 10px'  hidden>
        <img src="img/games1.jpeg" id="cover3" style="width:100%" class="w3-hover-opacity">
        <div class="w3-container w3-white">
          <p id = "search3"><b> Example Book</b></p>
          <p id = "info3">Here would be the author, summary? ISBN info, and if it is available or not</p>
          <p id = "isbn3">0000</p>
          <button id = "add3" class="w3-button w3-black w3-margin-bottom" onclick = "addBook(3)"> Add to Library!</button>
        </div>
    </div>
    </div>

<div class="w3-row-padding"  id = "searchResults">
    <div class="w3-third w3-container" id="result4" style = 'margin-bottom: 10px'  hidden>
        <img src="img/games1.jpeg" id="cover4" style="width:100%" class="w3-hover-opacity">
        <div class="w3-container w3-white">
          <p id = "search4"><b> Example Book</b></p>
          <p id = "info4">Here would be the author, summary? ISBN info, and if it is available or not</p>
          <p id = "isbn4">0000</p>
          <button id = "add4" class="w3-button w3-black w3-margin-bottom" onclick = "addBook(4)"> Add to Library!</button>
        </div>
    </div>
    <div class="w3-third w3-container" id="result5" style = 'margin-bottom: 10px'  hidden>
          <img src="img/games1.jpeg" id="cover5" style="width:100%" class="w3-hover-opacity">
          <div class="w3-container w3-white">
            <p id = "search5"><b> Example Book</b></p>
            <p id = "info5">Here would be the author, summary? ISBN info, and if it is available or not</p>
            <p id = "isbn5">0000</p>
            <button id = "add5" class="w3-button w3-black w3-margin-bottom" onclick = "addBook(5)"> Add to Library!</button>
          </div>
    </div>
    <div class="w3-third w3-container" id="result6" style = 'margin-bottom: 10px'  hidden>
            <img src="img/games1.jpeg" id="cover6" style="width:100%" class="w3-hover-opacity">
            <div class="w3-container w3-white">
              <p id = "search6"><b> Example Book</b></p>
              <p id = "info6">Here would be the author, summary? ISBN info, and if it is available or not</p>
              <p id = "isbn6">0000</p>
              <button id = "add6" class="w3-button w3-black w3-margin-bottom" onclick = "addBook(6)"> Add to Library!</button>
            </div>
    </div>
    </div>
<div class="w3-row-padding"  id = "searchResults"></div>
    <div class="w3-third w3-container" id="result7" style = 'margin-bottom: 10px'  hidden>
              <img src="img/games1.jpeg" id="cover7" style="width:100%" class="w3-hover-opacity">
              <div class="w3-container w3-white">
                <p id = "search7"><b> Example Book</b></p>
                <p id = "info7">Here would be the author, summary? ISBN info, and if it is available or not</p>
                <p id = "isbn7">0000</p>
                <button id = "add7" class="w3-button w3-black w3-margin-bottom" onclick = "addBook(7)"> Add to Library!</button>
              </div>
    </div>
    <div class="w3-third w3-container" id="result8" style = 'margin-bottom: 10px'  hidden>
      <img src="img/games1.jpeg" id="cover8" style="width:100%" class="w3-hover-opacity">
      <div class="w3-container w3-white">
        <p id = "search8"><b> Example Book</b></p>
        <p id = "info8">Here would be the author, summary? ISBN info, and if it is available or not</p>
        <p id = "isbn8">0000</p>
        <button id = "add8" class="w3-button w3-black w3-margin-bottom" onclick = "addBook(8)"> Add to Library!</button>
      </div>
</div>
<div class="w3-third w3-container" id="result9" style = 'margin-bottom: 10px'  hidden>
  <img src="img/games1.jpeg" id="cover9" style="width:100%" class="w3-hover-opacity">
  <div class="w3-container w3-white">
    <p id = "search9"><b> Example Book</b></p>
    <p id = "info9">Here would be the author, summary? ISBN info, and if it is available or not</p>
    <p id = "isbn9">0000</p>
    <button id = "add9" class="w3-button w3-black w3-margin-bottom" onclick = "addBook(9)"> Add to Library!</button>
  </div>
</div>

  </div>



</div>
</div>

  
  
<!-- End page content -->
</div>
<!-- <script src="https://requirejs.org/docs/release/2.3.5/minified/require.js"></script> -->
<script>
//const url2 = "http://localhost:5176/api/User";
const url2 = "https://personal-book-library.azurewebsites.net/api/User";
//const url = "http://localhost:5176/api/Book";
const url = "https://personal-book-library.azurewebsites.net/api/Book";
const url3 = "https://personal-book-library-1.azurewebsites.net/api/EnvironmentVar";

let myBooks = [];
let allBooks = [];
let index = 0;
let envVariable = "";

//var id = getID();
//var id = localStorage.getItem("userId");
//var user2 = getAccount(id);
//user = localStorage.getItem("user");
const user = JSON.parse(localStorage.getItem('user'));
const id = JSON.parse(localStorage.getItem('userID'));
let userName = user.username;
let firstName = user.firstName;
document.getElementById('SideTitle').innerHTML = firstName + "'s Library";
document.getElementById('Title').innerHTML = firstName + "'s Library";

if (user.numBooks != 0) {
  getBooks(userName);
  index = user.numBooks;
}

//getBooks(user);

async function GetAllBooks() {
  let response = await fetch(url);
  allBooks = await response.json();
  //console.log(myUser);
} 

async function getBooks(username) {
await GetAllBooks();
myBooks = allBooks.filter(Book => Book.username === username);
user.numBooks = myBooks.length;
console.log(user.numBooks);
if (!myBooks) return;
console.log(myBooks);
for(var i = 0; i< user.numBooks; i++){
  var j = i+1;
  var book = document.getElementById('book'+j);
  document.getElementById('title'+j).innerHTML = myBooks[i].title;
  document.getElementById('summ'+j).innerHTML ="Author: " + myBooks[i].author + " ISBN:  " + myBooks[i].isbn;
  document.getElementById("image"+j).src = myBooks[i].img;
  if(myBooks[i].status == "In Library"){
    document.getElementById("edit"+j).innerHTML = "Lend this book?";
  }else{
    document.getElementById("edit"+j).innerHTML = "Rented to: " + myBooks[i].renter +"\n"+  "Returned?";
    var remind = document.getElementById("remind"+j);
    remind.removeAttribute("disabled");
  }
  book.removeAttribute("hidden");
  
  
}

//userID = userCheck.idusers;
//console.log(userID);
//console.log(passwordVal);
//console.log(userCheck.password);
// if (userCheck.password == passwordVal) {
//     success = true;
//     console.log("Success");
// } 
}

async function addBookData(username, isbn, author, title, img) {
    let Book = {
        username: username,
        isbn: isbn,
        author: author,
        title: title,
        img: img,
        status: "In Library",
        renter: "none",
        renterEmail: "none"
        //dateRented: 0-0-0
    };

    myBooks.push(Book);

    try {
        const response = await fetch(url, {
            method: "POST",
            body: JSON.stringify(Book),
            headers: {
                "Content-type": "application/json; charset=UTF-8"
            }
        });

        if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
        }

        console.log("Book added successfully!");
        // Optionally, you can reload the page or show a success message here
    } catch (error) {
        console.error('Error adding book:', error.message);
        // Log the error message to the console
    }
}

async function handleStatusUpdate(idbooks, status, renterEmail, renterName) {

const bookUpdate = myBooks.find(Book => Book.idbooks === idbooks);
if (!bookUpdate) return;

let Book = {
        username: bookUpdate.username,
        isbn: bookUpdate.isbn,
        author: bookUpdate.author,
        title: bookUpdate.title,
        img: bookUpdate.img,
        status: status,
        renter: renterName,
        renterEmail: renterEmail
        //dateRented: 0-0-0
    };

//JSON.stringify(Book);
await fetch(`${url}/${idbooks}`, {
    method: "PUT",
    body: JSON.stringify(Book),
    headers: {
       "Content-type": "application/json"
     }
});


// const response = await fetch(url, {
//             method: "PUT",
//             body: JSON.stringify(Book),
//             headers: {
//                 "Content-type": "application/json; charset=UTF-8"
//             }
//         });

//myInventory = myInventory.filter(Inventory => Inventory.carID !== carID);

//location.reload();

}

async function deleteBookData(idbooks) {

const bookUpdate = myBooks.find(Book => Book.idbooks === idbooks);
if (!bookUpdate) return;

await fetch(`${url}/${idbooks}`, {
    method: "DELETE"
});

}

async function handleNumBooksUpdate(idusers, num) {

//const bookUpdate = myBooks.find(Book => Book.idbooks === idbooks);
//if (!bookUpdate) return;

await fetch(`${url2}/${idusers}`, {
    method: "PUT",
    body: JSON.stringify(num),
    headers: {
      "Content-type": "application/json"
    }
});

//myInventory = myInventory.filter(Inventory => Inventory.carID !== carID);

//location.reload();
}




// for(var i = 0; i< user.numBooks; i++){
//   var j = i+1;
//   var book = document.getElementById('book'+j);
//   document.getElementById('title'+j).innerHTML = myBooks[i].title;
//   document.getElementById('summ'+j).innerHTML ="Author: " + myBooks[i].author + " ISBN:  " + myBooks[i].isbn;
//   document.getElementById("image"+j).src = myBooks[i].img;
//   book.removeAttribute("hidden");
  
// }

function edit(num){
  
  if (myBooks[num-1].status == "In Library"){
    myBooks[num-1].status = "Lent Out Pending"; //FIX THIS LINE FOR DATABASE
    //go to lending html somehow
    //handleStatusUpdate(myBooks[num-1].idbooks);
    var box = document.getElementById('renter');
    box.removeAttribute('hidden');
    document.getElementById('edit'+num).innerHTML = "Please input information in the box below";
    var label = document.getElementById("sideRenter");
    label.removeAttribute('hidden');
    var remind = document.getElementById("remind"+num);
    remind.removeAttribute("disabled");
    console.log("here");
  }else{
    myBooks[num-1].status = "In Library";
    handleStatusUpdate(myBooks[num-1].idbooks, 'In Library', 'none', 'none');
    document.getElementById('edit'+num).innerHTML = "Lend this book?"
    var remind = document.getElementById("remind"+num);
    remind.setAttribute("disabled", true);
    console.log("here1");
  }
  document.getElementById('summ'+num).innerHTML ="Author: " + myBooks[num-1].author + " ISBN:  " + myBooks[num-1].isbn;
  
}

// function edit(num){
//   if (user.bookList[num-1].status == "In Library"){
//     user.bookList[num-1].status = "Lent Out Pending";
//     //go to lending html somehow
//     var box = document.getElementById('renter');
//     box.removeAttribute('hidden');
//     document.getElementById('edit'+num).innerHTML = "Please input information in the box below";
//   }else{
//     user.bookList[num-1].status = "In Library";
//     document.getElementById('edit'+num).innerHTML = "Lend this book?"
//   }
//   document.getElementById('summ'+num).innerHTML ="Author: " + user.bookList[num-1].author + " ISBN:  " +user.bookList[num-1].isbn;
  
// }

function checkOut(){
 var email = document.getElementById("inputEmail").value;
 var name = document.getElementById("inputDate").value;
 //var weeks = document.getElementById("inputWeeks").value;
 

  for(var i = 0; i < user.numBooks; i++){
    if(myBooks[i].status == "Lent Out Pending"){
        //myBooks[i].marked(email, date, weeks); idk what this is but we need it
        myBooks[i].status = "Lent Out";
        myBooks[i].renterEmail = email;
        //myBooks[i].renterEmail
        document.getElementById('edit'+(i+1)).innerHTML = "Rented to: " + name +"\n"+  "Returned?";
        var box = document.getElementById('renter');
        box.setAttribute('hidden', true);
        var label = document.getElementById('sideRenter');
        label.setAttribute('hidden', true);
       // console.log(user.bookList[i].title + " to "  + user.bookList[i].renterEmail);
       //Add for lending:
       
        handleStatusUpdate(myBooks[i].idbooks, 'Lent Out', email, name);
        break;
    }
  }

  
}

function filterAll(){
  console.log("Filter all");
  for(var i = 0; i< user.numBooks; i++){
  var j = i+1;
  var book = document.getElementById('book'+j);
  book.removeAttribute("hidden");
}
}

function filterIn(){
  console.log("Filtered In library");
  for(var i = 0; i< user.numBooks; i++){
  var j = i+1;
  var book = document.getElementById('book'+j);
  console.log(myBooks[i].status + myBooks[i].title);
  if(myBooks[i].status == "In Library"){
      console.log("here");
      book.removeAttribute("hidden");
  }else{
    book.setAttribute("hidden", true);
  }
}
}
function filterLent(){
  console.log("filterd lent out");
  for(var i = 0; i< user.numBooks; i++){
  var j = i+1;
  var book = document.getElementById('book'+j);
  if(myBooks[i].status == "Lent Out"){
      book.removeAttribute("hidden");
  }else{
    book.setAttribute("hidden", true);
  }
}
}

function w3_open() {
    document.getElementById("mySidebar").style.display = "block";
    document.getElementById("myOverlay").style.display = "block";
}
 
function w3_close() {
    document.getElementById("mySidebar").style.display = "none";
    document.getElementById("myOverlay").style.display = "none";
}


function addBook(num){
  var searched = document.getElementById('result'+num);
  var title = document.getElementById("search" + num).innerHTML;
  var author = document.getElementById("info"+num).innerHTML;
  var isbn = document.getElementById("isbn"+num).innerHTML;
  if(!document.getElementById("cover"+num).src){
    var source = 'img/noimage.jpeg';
  }else{
    var source = document.getElementById("cover"+num).src;
  }

 // console.log("title: " + title);

  let newBook = new Book(title, author, isbn, "In Library", source)
  //user2.addBook(newBook);
  addBookData(userName, isbn, author, title, source);
  //numBooks += 1;
  //myBooks.push(newBook);
  user.numBooks = user.numBooks + 1; 
  index += 1;
  handleNumBooksUpdate(user.idusers, 1);
  //user2.numBooks = user2.numBooks + 1; 
  //console.log(user.numBooks);
  //console.log(user.bookList[user.numBooks-1].title);

  var j = user.numBooks;
  var i = user.numBooks - 1;
  //console.log(i + "= i"); 
  var book = document.getElementById('book'+j);
  document.getElementById('title'+j).innerHTML = title;
  document.getElementById('summ'+j).innerHTML ="Author: " + author + " ISBN:  " + isbn;
  document.getElementById("image"+j).src = source;
  // document.getElementById('title'+j).innerHTML = user.bookList[i].title;
  // document.getElementById('summ'+j).innerHTML ="Author: " + user.bookList[i].author + " ISBN:  " +user.bookList[i].isbn;
  // document.getElementById("image"+j).src = user.bookList[i].img;
  book.removeAttribute("hidden");

  document.getElementById('input').innerHTML = "";
  for(var i = 0; i<9; i++){
    j = i +1;
    var searched = document.getElementById('result'+j);
    searched.setAttribute("hidden", true);
  }

}


// function addBook(num){
//   var searched = document.getElementById('result'+num);
//   var title = document.getElementById("search" + num).innerHTML;
//   var author = document.getElementById("info"+num).innerHTML;
//   var isbn = document.getElementById("isbn"+num).innerHTML;
//   if(!document.getElementById("cover"+num).src){
//     var source = 'img/noimage.jpeg';
//   }else{
//     var source = document.getElementById("cover"+num).src;
//   }

//  // console.log("title: " + title);

//   let newBook = new Book(title, author, isbn, "In Library", source)
//   //user.addBook(newBook);
//   addBookData(userName, isbn);
//   user.numBooks = user.numBooks + 1; //FIX THIS LINE FOR THE DATABASE
//   //console.log(user.numBooks);
//   //console.log(user.bookList[user.numBooks-1].title);

//   var j = user.numBooks;
//   var i = user.numBooks - 1;
//   //console.log(i + "= i"); 
//   var book = document.getElementById('book'+j);
//   document.getElementById('title'+j).innerHTML = user.bookList[i].title;
//   document.getElementById('summ'+j).innerHTML ="Author: " + user.bookList[i].author + " ISBN:  " +user.bookList[i].isbn;
//   document.getElementById("image"+j).src = user.bookList[i].img;
//   book.removeAttribute("hidden");

//   document.getElementById('input').innerHTML = "";
//   for(var i = 0; i<9; i++){
//     j = i +1;
//     var searched = document.getElementById('result'+j);
//     searched.setAttribute("hidden", true);
//   }

// }

function getbooks(){
    document.getElementById('output').innerHTML="Searching...";
    fetch("https://openlibrary.org/search.json?q=" + document.getElementById("input").value)
    .then(a => a.json())
    .then(response =>{
        // clear "searching..." before displaying results
        document.getElementById('output').innerHTML = "";
        for (var i = 0; i < 9; i++){
          //  console.log("here "+ i );
            j = i +1;
            var searched = document.getElementById('result'+j);
            document.getElementById("search"+j).innerHTML = response.docs[i].title;
            document.getElementById("info"+j).innerHTML = response.docs[i].author_name[0];
            document.getElementById("isbn"+j).innerHTML = response.docs[i].isbn[0]
            if('https://covers.openlibrary.org/b/isbn/'+response.docs[i].isbn[0]+'-M.jpg' == null){
                document.getElementById("cover"+j).src = 'img/noimage.jpeg';
            }else{
                document.getElementById("cover"+j).src = 'https://covers.openlibrary.org/b/isbn/'+response.docs[i].isbn[0]+'-M.jpg';
            }
            searched.removeAttribute("hidden");
        }
    });
}



function remind(num){
  var book = document.getElementById('book'+num);
  //renter email and book
  console.log("Issue");
  var bookTitle = myBooks[num-1].title;
  var renterEmailTo = myBooks[num-1].renterEmail;
  
  sendReminder(bookTitle, userName, renterEmailTo);
  
}

function remove(num){
  console.log("Removing " + num);
  var book = document.getElementById('book'+num);
  var place = num - 1; 
  console.log(myBooks);
  console.log(myBooks[num-1].idbooks);
  deleteBookData(myBooks[num-1].idbooks);
  handleNumBooksUpdate(user.idusers, 0);

  user.numBooks = user.numBooks -1;
  //num == user.numBooks ||
  if(user.numBooks == 0){
    book.setAttribute("hidden", true);
    user.numBooks = user.numBooks - 1;
    //myBooks[num-1] = null;
    myBooks.pop();
    console.log(user.numBooks);
    return;
  }
  for(var i = place; i<user.numBooks; i++){
    console.log((i+1) + " replacing " + i);
    myBooks[i] = myBooks[i+1];
  }
  myBooks.pop();
  //myBooks[num-1] = null;
  console.log(myBooks);
  //user.numBooks
  console.log("Index:");
  console.log(index);

  var j = 0;
  for(var i = 0; i<= user.numBooks+1; i++){
    console.log(myBooks[i]);
  if (myBooks[i] != null) {
  //var j = i+1;
  j += 1;
  
  var book = document.getElementById('book'+j);
  document.getElementById('title'+j).innerHTML = myBooks[i].title;;
  document.getElementById('summ'+j).innerHTML ="Author: " + myBooks[i].author + " ISBN:  " + myBooks[i].isbn;
  document.getElementById("image"+j).src = myBooks[i].img;
  if (myBooks[i].status == "Lent Out") {
    document.getElementById('edit'+j).innerHTML = "Rented to: " + myBooks[i].renterName +"\n"+  "Returned?";
  } else {
    document.getElementById("edit"+j).innerHTML = "Lend this book?";
  }
 
 // book.removeAttribute("hidden");
  console.log("displaying: " + j + " which is at index " + i);
  }
  }
  console.log("j " + j);
  var book = document.getElementById('book'+(j+1));
  book.setAttribute("hidden", true);
  console.log("numbooks " + user.numBooks);

}

// async function grabEnv(successEnv) {

//     try {
//         const response = await fetch(url3, {
//             method: "GET"
//         });

//         if (!response.ok) {
//             throw new Error(`HTTP error! Status: ${response.status}`);
//         }
//     } catch (error) {
//         console.error('Error getting variable:', error.message);
//         successEnv = false;
//         // Log the error message to the console
//     }
// }

async function GetEnv() {
  let response = await fetch(url3);
  //envVariable = await response.json();
  let textResponse = await response.text(); 
  //console.log(myUser);
} 

// function sendEmail(bookTitle, userName, renterEmailTo, envVariable) {
//   const sgMail = require(['@sendgrid/mail']);
//   sgMail.setApiKey(envVariable);

//   const renter = userName;

//   const message = {
//       to: renterEmailTo,
//       from: 'personalbooklibrarydesign@gmail.com',
//       subject: 'Your book is overdue!',
//       text: 'Dear borrower,\n\nThis is to inform you that your book ' + bookTitle + ' rented from ' + renter + ' is overdue.\nPlease return it as soon as possible.\n\nThank you,\nPersonal Book Library',
//       html: '<p><strong>Dear borrower,</strong></p><p>This is to inform you that your book <strong>' + bookTitle + '</strong> rented from <strong>' + renter + '</strong> is overdue.</p><p>Please return it as soon as possible.</p><p>Thank you,<br>Personal Book Library</p>',
//   };

//   sgMail
//       .send(message)
//       .then(Response => console.log('Email sent.'))
//       .catch(error => console.log(error.message));
// }

async function sendReminder(bookTitle, userName, renterEmailTo){ //actually sends the reminder
  
  // fetch('/api/environmentvariable')
  //   .then(response => response.json())
  //   .then(data => {
  //       // Now you can use the environment variable in your JavaScript code
  //       console.log(data);
  //   })
  //   .catch(error => console.error('Error fetching environment variable:', error));

  await GetEnv();
  //await sendMail(envVariable, bookTitle, userName, renterEmailTo);

  //sendEmail(bookTitle, userName, renterEmailTo, envVariable);
  // const sgMail = require('@sendgrid/mail');
  // sgMail.setApiKey(envVariable);
  // $API_KEY = process.env.SENDGRID_API_KEY
  //APPSETTING_SENDGRID_API_KEY

}

</script>

</body>
</html>


